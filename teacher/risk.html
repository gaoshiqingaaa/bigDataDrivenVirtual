<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>风险承受能力评估问卷</title>
        <link rel="stylesheet" href="../lib/css/layui.css">
        <link rel="stylesheet" href="../css/reset.css">
        <link rel="stylesheet" href="../css/risk.css" />
    </head>
    <body>
        <!-- 导航栏 -->
        <div id="nav">
            <a href="../index.html"><button type="button" class="layui-btn layui-btn-radius layui-btn-primary" id="but1">返回</button></a>
            <button type="button" class="layui-icon layui-icon-friends" id="friends"></button>
            <button type="button" class="layui-icon layui-icon-help" id="help"></button>
        </div>

        <!-- 说明页面 -->
        <div class="card">
           <p>任务说明</p>
           <div id="neirong">
               <ul>
                   <li>根据我国资本市场实际情况，本实验项目设定可选取的资产大类有六类：国内股市（大盘股、中盘股、小盘股）、国外股市（美股）、国内债卷
               （国债、企业债）、货币基金。由于是被动投资。考虑历史数据长短问题，上述资产分别以沪深300、中证500、创业板、标普500、上证国债、
               上证企业债为代表。</li>
                   <li>开始实验前，系统会通过一系列问题对投资者的风险承受能力进行评测，并根据测试结果计算风险厌恶系数。该风险厌恶系数是
                   计算组合配置权重的重要数据。学习模式中，假设原投资者的风险厌恶系数为3（系数越大，表明越厌恶风险，投资更保守）。</li>
               </ul>
               <!-- <p><span style="font-size: 30px;">·</span>根据我国资本市场实际情况，本实验项目设定可选取的资产大类有六类：国内股市（大盘股、中盘股、小盘股）、国外股市（美股）、国内债卷
               （国债、企业债）、货币基金。由于是被动投资。考虑历史数据长短问题，上述资产分别以沪深300、中证500、创业板、标普500、上证国债、
               上证企业债为代表。</p>
               <p style="margin-top: 2%;">
                   ·开始实验前，系统会通过一系列问题对投资者的风险承受能力进行评测，并根据测试结果计算风险厌恶系数。该风险厌恶系数是
                   计算组合配置权重的重要数据。学习模式中，假设原投资者的风险厌恶系数为3（系数越大，表明越厌恶风险，投资更保守）。
               </p> -->
               <img src="../img/7-form@2x.png" >
               <button type="button" id="start" onclick="window.location.href = '../teacher/pages.html'">开始分析</button>
           </div>
        </div>

        
            
        <script src="../js/jquery-2.1.4.js"></script>
        <script src="../lib/layui.all.js"></script>
        <script>
           var index = 0;
           var jd = document.getElementsByTagName('li');
           var num = 0;
           var Grades = '';
          
           //广播皮肤
           layer.config({
               extend: 'myskin/style.css'
           });
           
           //进入答题环节
           $('#queren').click(function(){
              $('.card').show();
               $('#mainWin').hide();
           });
           
           //点击盒子换题
           $('.t1').click(function(){
               $('.t1').removeClass('ti_cli');
               $('.tp1').removeClass('tp_cli');
               $('.t1').find('input').prop("checked",false);
               
               $(this).find('input').prop("checked",true);
               $(this).addClass('ti_cli');
               $(this).find('p').addClass('tp_cli');
           })
           
           //选项背景切换
           $('.t1 input').click(function() {
               $('.t1').removeClass('ti_cli');
               $('.tp1').removeClass('tp_cli');
               // let _this = $(this) //;当前点击的html元素
               //class 【//背景图的】 on
               //css 文件 diant1.on{}
               $(this).prop("checked",true);
               $(this).parent().parent().siblings().find("input").prop("checked",false);
               $(this).parent().addClass('tp_cli');
               $(this).parent().parent().addClass('ti_cli');
           });
           
           //提交按钮事件
           $('button:button[id="tijiao"]').click(function() {
               
               var timu = document.getElementsByName("t10");
               if (timu[0].checked == false && timu[1].checked == false && timu[2].checked == false&& timu[3].checked == false){
                   layer.msg('请先完成本题!', {
                       shade: [0.5, '#000'],
                       anim: 6,
                       icon: 5,
                    })
                    return;
               };
               
               
               for (var i = 1; i < 11; i++) {
                   var t = ('t' + i);
                   var timu = document.getElementsByName(t);
                   if (i == 1) {
                       if (timu[0].checked) {
                           num = num + 3;
                       } else if (timu[1].checked) {
                           num = num + 7;
                       } else if (timu[2].checked) {
                           num = num + 9;
                       } else if (timu[3].checked) {
                           num = num + 5;
                       } else if (timu[4].checked) {           
                           num = num + 1;
                       };
                   }else if (i == 2) {
                       if (timu[0].checked) {
                           num = num + 1;
                       } else if (timu[1].checked) {           
                           num = num + 3;
                       } else if (timu[2].checked) {           
                           num = num + 5;
                       } else if (timu[3].checked) {           
                           num = num + 7;
                       } else if (timu[4].checked) {           
                           num = num + 9;
                       };
                   }else if (i == 3) {
                       if (timu[0].checked) {
                           num = num + 1;
                       } else if (timu[1].checked) {           
                           num = num + 5;
                       } else if (timu[2].checked) {           
                           num = num + 7;
                       } else if (timu[3].checked) {           
                           num = num + 9;
                       };
                   }else if (i == 4) {
                       if (timu[0].checked) {
                           num = num + 9;
                       } else if (timu[1].checked) {           
                           num = num + 7;
                       } else if (timu[2].checked) {           
                           num = num + 5;
                       } else if (timu[3].checked) {           
                           num = num + 3;
                       } else if (timu[4].checked) {           
                           num = num + 1;
                       };
                   }else if (i == 5) {
                       if (timu[0].checked) {
                           num = num + 0;
                       } else if (timu[1].checked) {           
                           num = num + 3;
                       } else if (timu[2].checked) {           
                           num = num + 5;
                       } else if (timu[3].checked) {           
                           num = num + 7;
                       } else if (timu[4].checked) {           
                           num = num + 9;
                       };
                   }else if (i == 6) {
                       if (timu[0].checked) {
                           num = num + 0;
                       } else if (timu[1].checked) {           
                           num = num + 3;
                       } else if (timu[2].checked) {           
                           num = num + 5;
                       } else if (timu[3].checked) {           
                           num = num + 7;
                       };
                   }else if (i == 7) {
                       if (timu[0].checked) {
                           num = num + 0;
                       } else if (timu[1].checked) {           
                           num = num + 3;
                       } else if (timu[2].checked) {           
                           num = num + 5;
                       } else if (timu[3].checked) {           
                           num = num + 7;
                       };
                   }else if (i == 8) {
                       if (timu[0].checked) {
                           num = num + 1;
                       } else if (timu[1].checked) {           
                           num = num + 5;
                       } else if (timu[2].checked) {           
                           num = num + 7;
                       };
                   }else if (i == 9) {
                       if (timu[0].checked) {
                           num = num + 1;
                       } else if (timu[1].checked) {           
                           num = num + 3;
                       } else if (timu[2].checked) {           
                           num = num + 7;
                       } else if (timu[3].checked) {           
                           num = num + 9;
                       };
                   }else if (i == 10) {
                       if (timu[0].checked) {
                           num = num + 1;
                       } else if (timu[1].checked) {           
                           num = num + 3;
                       } else if (timu[2].checked) {           
                           num = num + 7;
                       } else if (timu[3].checked) {           
                           num = num + 9;
                       };
                   };
               };
               if (num >= 73) {
                   $('.content').hide();
                   $('#result').show();
                   $('#jiji').show();
                   $('#jjx').show();
                   
                   Grades = '积极型！';
               } else if (num >= 65) {
                   $('.content').hide();
                   $('#result').show();
                   $('#xiangjiji').show();
                   $('#xdjjx').show();
                   
                   Grades = '相对积极型！';
               } else if (num >= 31) {
                   $('.content').hide();
                   $('#result').show();
                   $('#wenjian').show();
                   $('#wjx').show();
                   
                   Grades = '稳健型！';
               } else if (num >= 21) {
                   $('.content').hide();
                   $('#result').show();
                   $('#xiangbaoshou').show();
                   $('#xdbsx').show();
                   
                   Grades = '相对保守型！';
               } else if (num >= 7) {
                   $('.content').hide();
                   $('#result').show();
                   $('#baoshou').show();
                   $('#bsx').show();
                   
                   Grades = '保守型！';
               };
               try{
                   let Grade = {
                       grade:Grades,
                       number:num,
                   };
                   localStorage.setItem("Grades", JSON.stringify(Grade));
               }catch(e){
                   //TODO handle the exception
                   console.log("成绩录入异常！")
               }
               
               num = 0
           })
           
           //帮助按钮触发事件
           $('button:button[id="help"]').click(function() {
               
            //    layer.alert(
            //        '尊敬的用户：</br>以下问题可协助评估您对投资产品和服务的风险承受能力，请您根据自身情况认真选择。评估结果仅供参考， 不构成投资建议。为了及时了解您的风险承受能力，我们建议您持续做好动态评估。我们承诺对您的所有个人资料保密。',
            //        {
            //         skin: 'layer-bg',
            //         move: false
            //         }
            //    )
            layer.open({
                    type: 2,
                    area:['1000px', '600px'], 
                    content:'../system.html',
                    skin: 'layer-bg',
                })
        })
           
           //个人按钮触发事件
           $('button:button[id="friends"]').click(function() {
               layer.alert('<i class="layui-icon layui-iconB" >&#xe69c;</i>请先完成风险评估问卷！', {
                   skin: 'layer-bg',
                   move: false
               })
           })
           
           //下一题按钮
           $('button:button[id="next"]').click(function() {
               index++;
               
               var namet = ('t'+index);
               var timu = document.getElementsByName(namet);
               if (index == 1 || index == 2 || index == 4 || index == 5){
                   if (timu[0].checked == false && timu[1].checked == false && timu[2].checked == false&& timu[3].checked == false&& timu[4].checked == false){
                       layer.msg('请先完成本题!', {
                           shade: [0.5, '#000'],
                           anim: 6,
                           icon: 5,
                        })
                        index--;
                        return;
                   };
               }else if(index == 3 || index == 6 || index == 7 || index == 9 || index == 10){
                   if (timu[0].checked == false && timu[1].checked == false && timu[2].checked == false&& timu[3].checked == false){
                       layer.msg('请先完成本题!', {
                           shade: [0.5, '#000'],
                           anim: 6,
                           icon: 5,
                        })
                        index--;
                        return;
                   };
               }else if (index == 8){
                   if (timu[0].checked == false && timu[1].checked == false && timu[2].checked == false){
                       layer.msg('请先完成本题!', {
                           shade: [0.5, '#000'],
                           anim: 6,
                           icon: 5,
                        })
                        index--;
                        return;
                   };
               };
               
               for (var i = 0; i < 10; i++) {
                   if (i == index) {
                       var tinum = (".ti"+(i+1));
                       var aurl = ("url(../img/apple"+(i+1)+".png)");
                       var hnum = ("#h"+(i+1));
                       var t = ('.t'+(i+1)+' input');
                       var tt = ('.t'+(i+1));
                       var tp = ('.tp'+(i+1));
                       $(tinum).show();
                       $('#apple').css('background-image',aurl)
                       $(hnum).show();
                       $(t).click(function() {
                           $(tt).removeClass('ti_cli');
                           $(tp).removeClass('tp_cli');
                           $(this).prop("checked",true);
                           $(this).parent().parent().siblings().find("input").prop("checked",false);
                           $(this).parent().addClass('tp_cli');
                           $(this).parent().parent().addClass('ti_cli');
                       });
                       $(tt).click(function(){
                           $(tt).removeClass('ti_cli');
                           $(tp).removeClass('tp_cli');
                           $(tt).find('input').prop("checked",false);
                           
                           $(this).find('input').prop("checked",true);
                           $(this).addClass('ti_cli');
                           $(this).find('p').addClass('tp_cli');
                       });
                       jd[i].className = 'step-active';
                   } else {
                       var tinum = (".ti"+(i+1));
                       var hnum = ("#h"+(i+1));
                       $(tinum).hide();
                       $(hnum).hide();
                   };
                   
                   if(index == 0){
                       $('#back').hide();
                   }else{
                       $('#back').show();
                   };
                   
                   if(index == 9){
                       $('#tijiao').show();
                       $('#next').hide();
                   }else{
                       $('#tijiao').hide();
                       $('#next').show();
                   };
               }
           });
           
           //上一题按钮
           $('button:button[id="back"]').click(function() {
               index--;
               for (var i = 9; i >= 0; i--) {
                   if (i == index) {
                       var tinum = (".ti"+(i+1));
                       var aurl = ("url(../img/apple"+(i+1)+".png)");
                       var hnum = ("#h"+(i+1));
                       $(tinum).show();
                       $('#apple').css('background-image',aurl)
                       $(hnum).show();
                       var t = ('.t'+(i+1)+' input');
                       var tt = ('.t'+(i+1));
                       var tp = ('.tp'+(i+1));
                       $(t).click(function() {
                           $(tt).removeClass('ti_cli');
                           $(tp).removeClass('tp_cli');
                           $(this).prop("checked",true);
                           $(this).parent().parent().siblings().find("input").prop("checked",false);
                           $(this).parent().addClass('tp_cli');
                           $(this).parent().parent().addClass('ti_cli');
                       });
                       $(tt).click(function(){
                           $(tt).removeClass('ti_cli');
                           $(tp).removeClass('tp_cli');
                           $(tt).find('input').prop("checked",false);
                           
                           $(this).find('input').prop("checked",true);
                           $(this).addClass('ti_cli');
                           $(this).find('p').addClass('tp_cli');
                       });
                       jd[i + 1].classList.remove('step-active');
                   } else {
                       var tinum = (".ti"+(i+1));
                       var hnum = ("#h"+(i+1));
                       $(tinum).hide();
                       $(hnum).hide();
                   };
                   
                   if(index == 0){
                       $('#back').hide();
                   }else{
                       $('#back').show();
                   };
                   
                   if(index == 9){
                       $('#tijiao').show();
                       $('#next').hide();
                   }else{
                       $('#tijiao').hide();
                       $('#next').show();
                   };
               }
           }); 
        </script>
    </body>

</html>
